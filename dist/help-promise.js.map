{"version":3,"sources":["help-promise.js"],"names":["curry","fn","arity","length","resolver","memory","Array","prototype","slice","call","arguments","local","next","push","apply","of","Promise","resolve","x","compose","ctx","fns","reverse","head","tail","args","reduce","acc","then","_zero","isZero","p","zero","_arrayFromIterator","iter","list","done","value","_functionName","f","match","String","_has","prop","obj","Object","hasOwnProperty","identical","a","b","_isArguments","toString","keys","hasEnumBug","propertyIsEnumerable","nonEnumerableProps","hasArgsEnumBug","contains","item","idx","keys_ok","keys_enumsbug","nIdx","ks","checkArgsLength","type","val","undefined","_equals","stackA","stackB","equals","constructor","valueOf","name","message","source","global","ignoreCase","multiline","sticky","unicode","entries","keysA","key","pop","p1","p2","all","left","right","tap","NEVER","_","never","_then","map","bind","filter","promise","filtered","fromCallback","alt","race","ap","funcPromise","valuePromise","func","flatten","arr","flat","toFlatten","concat","isArray","results","_flat","xs","helpPromise"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;AAGA,iBAASA,KAAT,CAAeC,EAAf,EAAmB;AACf,gBAAIC,QAAQD,GAAGE,MAAf;;AAEA,mBAAQ,SAASC,QAAT,GAAoB;AACxB,oBAAIC,SAASC,MAAMC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAb;AACA,uBAAO,YAAY;AACf,wBAAIC,QAAQN,OAAOG,KAAP,EAAZ;AAAA,wBAA4BI,IAA5B;AACAN,0BAAMC,SAAN,CAAgBM,IAAhB,CAAqBC,KAArB,CAA2BH,KAA3B,EAAkCD,SAAlC;AACAE,2BAAOD,MAAMR,MAAN,IAAgBD,KAAhB,GAAwBD,EAAxB,GAA6BG,QAApC;AACA,2BAAOQ,KAAKE,KAAL,CAAW,IAAX,EAAiBH,KAAjB,CAAP;AACH,iBALD;AAMH,aARO,EAAR;AASH;;AAED;;;AAGA,YAAII,KAAKf,MAAM;AAAA,mBAAIgB,QAAQC,OAAR,CAAgBC,CAAhB,CAAJ;AAAA,SAAN,CAAT;;AAEA;;;AAGA;AACA,YAAIC,UAAU,SAAVA,OAAU,GAAkB;AAC5B,gBAAIC,MAAM,IAAV;;AAD4B,8CAALC,GAAK;AAALA,mBAAK;AAAA;;AAE5BA,gBAAIC,OAAJ;AACA,gBAAIC,OAAOF,IAAI,CAAJ,CAAX;AACA,gBAAIG,OAAOH,IAAIb,KAAJ,CAAU,CAAV,CAAX;;AAEA,mBAAO,YAAmB;AAAA,mDAANiB,IAAM;AAANA,wBAAM;AAAA;;AACtB,uBAAOD,KAAKE,MAAL,CAAY,UAAUC,GAAV,EAAe1B,EAAf,EAAmB;AAClC,2BAAOc,GAAGY,GAAH,EAAQC,IAAR,CAAa,UAAUV,CAAV,EAAa;AAC7B,+BAAOjB,GAAGQ,IAAH,CAAQW,GAAR,EAAaF,CAAb,CAAP;AACH,qBAFM,CAAP;AAGH,iBAJM,EAIJK,KAAKT,KAAL,CAAWM,GAAX,EAAgBK,IAAhB,CAJI,CAAP;AAKH,aAND;AAOH,SAbD;;AAeA;;;;AAIA,YAAMI,QAAQb,QAAQC,OAAR,CAAgB,KAAhB,CAAd;;AAEA,YAAIa,SAAS,SAATA,MAAS,IAAK;AACd,mBAAOC,MAAMF,KAAb;AACH,SAFD;AAGA,YAAIG,OAAO,SAAPA,IAAO;AAAA,mBAAMH,KAAN;AAAA,SAAX;;AAEA;;;AAGA,iBAASI,kBAAT,CAA4BC,IAA5B,EAAkC;AAC9B,gBAAIC,OAAO,EAAX;AACA,gBAAIvB,IAAJ;AACA,mBAAO,CAAC,CAACA,OAAOsB,KAAKtB,IAAL,EAAR,EAAqBwB,IAA7B,EAAmC;AAC/BD,qBAAKtB,IAAL,CAAUD,KAAKyB,KAAf;AACH;AACD,mBAAOF,IAAP;AACH;;AAED;;;AAGA,iBAASG,aAAT,CAAuBC,CAAvB,EAA0B;AACtB;AACA,gBAAIC,QAAQC,OAAOF,CAAP,EAAUC,KAAV,CAAgB,iBAAhB,CAAZ;AACA,mBAAOA,SAAS,IAAT,GAAgB,EAAhB,GAAqBA,MAAM,CAAN,CAA5B;AACH;;AAED;;;AAGA,iBAASE,IAAT,CAAcC,IAAd,EAAoBC,GAApB,EAAyB;AACrB,mBAAOC,OAAOtC,SAAP,CAAiBuC,cAAjB,CAAgCrC,IAAhC,CAAqCmC,GAArC,EAA0CD,IAA1C,CAAP;AACH;;AAED;;;AAGA,iBAASI,SAAT,CAAmBC,CAAnB,EAAsBC,CAAtB,EAAyB;AACrB;AACA,gBAAID,MAAMC,CAAV,EAAa;AAAE;AACX;AACA,uBAAOD,MAAM,CAAN,IAAW,IAAIA,CAAJ,KAAU,IAAIC,CAAhC;AACH,aAHD,MAGO;AACH;AACA,uBAAOD,MAAMA,CAAN,IAAWC,MAAMA,CAAxB;AACH;AACJ;;AAED;;;AAGA,YAAIC,eAAgB,YAAY;AAC5B,gBAAIC,WAAWN,OAAOtC,SAAP,CAAiB4C,QAAhC;AACA,mBAAOA,SAAS1C,IAAT,CAAcC,SAAd,MAA6B,oBAA7B,GACH,SAASwC,YAAT,CAAsBhC,CAAtB,EAAyB;AACrB,uBAAOiC,SAAS1C,IAAT,CAAcS,CAAd,MAAqB,oBAA5B;AACH,aAHE,GAIH,SAASgC,YAAT,CAAsBhC,CAAtB,EAAyB;AACrB,uBAAOwB,KAAK,QAAL,EAAexB,CAAf,CAAP;AACH,aANL;AAOH,SATmB,EAApB;;AAWA;;;;AAIA;;;;;;;;;;;;;;;;;AAiBA,YAAIkC,OAAQ,YAAY;AACpB;AACA,gBAAIC,aAAa,CAAE,EAACF,UAAU,IAAX,EAAD,CAAmBG,oBAAnB,CAAwC,UAAxC,CAAlB;AACA,gBAAIC,qBAAqB,CAAC,aAAD,EAAgB,SAAhB,EAA2B,eAA3B,EAA4C,UAA5C,EACrB,sBADqB,EACG,gBADH,EACqB,gBADrB,CAAzB;AAEA;AACA,gBAAIC,iBAAkB,YAAY;AAC9B;;AACA,uBAAO9C,UAAU4C,oBAAV,CAA+B,QAA/B,CAAP;AACH,aAHqB,EAAtB;;AAKA,gBAAIG,WAAW,SAASA,QAAT,CAAkBtB,IAAlB,EAAwBuB,IAAxB,EAA8B;AACzC,oBAAIC,MAAM,CAAV;AACA,uBAAOA,MAAMxB,KAAKhC,MAAlB,EAA0B;AACtB,wBAAIgC,KAAKwB,GAAL,MAAcD,IAAlB,EAAwB;AACpB,+BAAO,IAAP;AACH;AACDC,2BAAO,CAAP;AACH;AACD,uBAAO,KAAP;AACH,aATD;;AAWA,qBAASC,OAAT,CAAiBhB,GAAjB,EAAsB;AAClB,uBAAOC,OAAOD,GAAP,MAAgBA,GAAhB,GAAsB,EAAtB,GAA2BC,OAAOO,IAAP,CAAYR,GAAZ,CAAlC;AACH;;AAED,qBAASiB,aAAT,CAAuBjB,GAAvB,EAA4B;AACxB,oBAAIC,OAAOD,GAAP,MAAgBA,GAApB,EAAyB;AACrB,2BAAO,EAAP;AACH;AACD,oBAAID,IAAJ,EAAUmB,IAAV;AACA,oBAAIC,KAAK,EAAT;AACA,oBAAIC,kBAAkBR,kBAAkBN,aAAaN,GAAb,CAAxC;AACA,qBAAKD,IAAL,IAAaC,GAAb,EAAkB;AACd,wBAAIF,KAAKC,IAAL,EAAWC,GAAX,MAAoB,CAACoB,eAAD,IAAoBrB,SAAS,QAAjD,CAAJ,EAAgE;AAC5DoB,2BAAGA,GAAG5D,MAAN,IAAgBwC,IAAhB;AACH;AACJ;AACD,oBAAIU,UAAJ,EAAgB;AACZS,2BAAOP,mBAAmBpD,MAAnB,GAA4B,CAAnC;AACA,2BAAO2D,QAAQ,CAAf,EAAkB;AACdnB,+BAAOY,mBAAmBO,IAAnB,CAAP;AACA,4BAAIpB,KAAKC,IAAL,EAAWC,GAAX,KAAmB,CAACa,SAASM,EAAT,EAAapB,IAAb,CAAxB,EAA4C;AACxCoB,+BAAGA,GAAG5D,MAAN,IAAgBwC,IAAhB;AACH;AACDmB,gCAAQ,CAAR;AACH;AACJ;AACD,uBAAOC,EAAP;AACH;AACD,mBAAO,OAAOlB,OAAOO,IAAd,KAAuB,UAAvB,IAAqC,CAACI,cAAtC,GACHI,OADG,GACOC,aADd;AAGH,SArDW,EAAZ;;AAuDA;;;AAGA,YAAII,OAAO,SAAPA,IAAO,CAACC,GAAD,EAAS;AAChB,mBAAOA,QAAQ,IAAR,GAAe,MAAf,GACHA,QAAQC,SAAR,GAAoB,WAApB,GACItB,OAAOtC,SAAP,CAAiB4C,QAAjB,CAA0B1C,IAA1B,CAA+ByD,GAA/B,EAAoC1D,KAApC,CAA0C,CAA1C,EAA6C,CAAC,CAA9C,CAFR;AAGH,SAJD;;AAMA,iBAAS4D,OAAT,CAAiBpB,CAAjB,EAAoBC,CAApB,EAAuBoB,MAAvB,EAA+BC,MAA/B,EAAuC;AACnC,gBAAIvB,UAAUC,CAAV,EAAaC,CAAb,CAAJ,EAAqB;AACjB,uBAAO,IAAP;AACH;;AAED,gBAAIgB,KAAKjB,CAAL,MAAYiB,KAAKhB,CAAL,CAAhB,EAAyB;AACrB,uBAAO,KAAP;AACH;;AAED,gBAAID,KAAK,IAAL,IAAaC,KAAK,IAAtB,EAA4B;AACxB,uBAAO,KAAP;AACH;;AAED,gBAAI,OAAOD,EAAEuB,MAAT,KAAoB,UAApB,IAAkC,OAAOtB,EAAEsB,MAAT,KAAoB,UAA1D,EAAsE;AAClE,uBAAO,OAAOvB,EAAEuB,MAAT,KAAoB,UAApB,IAAkCvB,EAAEuB,MAAF,CAAStB,CAAT,CAAlC,IACH,OAAOA,EAAEsB,MAAT,KAAoB,UADjB,IAC+BtB,EAAEsB,MAAF,CAASvB,CAAT,CADtC;AAEH;;AAED,oBAAQiB,KAAKjB,CAAL,CAAR;AACI,qBAAK,WAAL;AACA,qBAAK,OAAL;AACA,qBAAK,QAAL;AACI,wBAAI,OAAOA,EAAEwB,WAAT,KAAyB,UAAzB,IACAlC,cAAcU,EAAEwB,WAAhB,MAAiC,SADrC,EACgD;AAC5C,+BAAOxB,MAAMC,CAAb;AACH;AACD;AACJ,qBAAK,SAAL;AACA,qBAAK,QAAL;AACA,qBAAK,QAAL;AACI,wBAAI,EAAE,QAAOD,CAAP,yCAAOA,CAAP,eAAoBC,CAApB,yCAAoBA,CAApB,MAAyBF,UAAUC,EAAEyB,OAAF,EAAV,EAAuBxB,EAAEwB,OAAF,EAAvB,CAA3B,CAAJ,EAAqE;AACjE,+BAAO,KAAP;AACH;AACD;AACJ,qBAAK,MAAL;AACI,wBAAI,CAAC1B,UAAUC,EAAEyB,OAAF,EAAV,EAAuBxB,EAAEwB,OAAF,EAAvB,CAAL,EAA0C;AACtC,+BAAO,KAAP;AACH;AACD;AACJ,qBAAK,OAAL;AACI,2BAAOzB,EAAE0B,IAAF,KAAWzB,EAAEyB,IAAb,IAAqB1B,EAAE2B,OAAF,KAAc1B,EAAE0B,OAA5C;AACJ,qBAAK,QAAL;AACI,wBAAI,EAAE3B,EAAE4B,MAAF,KAAa3B,EAAE2B,MAAf,IACF5B,EAAE6B,MAAF,KAAa5B,EAAE4B,MADb,IAEF7B,EAAE8B,UAAF,KAAiB7B,EAAE6B,UAFjB,IAGF9B,EAAE+B,SAAF,KAAgB9B,EAAE8B,SAHhB,IAIF/B,EAAEgC,MAAF,KAAa/B,EAAE+B,MAJb,IAKFhC,EAAEiC,OAAF,KAAchC,EAAEgC,OALhB,CAAJ,EAK8B;AAC1B,+BAAO,KAAP;AACH;AACD;AACJ,qBAAK,KAAL;AACA,qBAAK,KAAL;AACI,wBAAI,CAACb,QAAQnC,mBAAmBe,EAAEkC,OAAF,EAAnB,CAAR,EAAyCjD,mBAAmBgB,EAAEiC,OAAF,EAAnB,CAAzC,EAA0Eb,MAA1E,EAAkFC,MAAlF,CAAL,EAAgG;AAC5F,+BAAO,KAAP;AACH;AACD;AACJ,qBAAK,WAAL;AACA,qBAAK,YAAL;AACA,qBAAK,mBAAL;AACA,qBAAK,YAAL;AACA,qBAAK,aAAL;AACA,qBAAK,YAAL;AACA,qBAAK,aAAL;AACA,qBAAK,cAAL;AACA,qBAAK,cAAL;AACI;AACJ,qBAAK,aAAL;AACI;AACJ;AACI;AACA,2BAAO,KAAP;AArDR;;AAwDA,gBAAIa,QAAQ/B,KAAKJ,CAAL,CAAZ;AACA,gBAAImC,MAAMhF,MAAN,KAAiBiD,KAAKH,CAAL,EAAQ9C,MAA7B,EAAqC;AACjC,uBAAO,KAAP;AACH;;AAED,gBAAIwD,MAAMU,OAAOlE,MAAP,GAAgB,CAA1B;AACA,mBAAOwD,OAAO,CAAd,EAAiB;AACb,oBAAIU,OAAOV,GAAP,MAAgBX,CAApB,EAAuB;AACnB,2BAAOsB,OAAOX,GAAP,MAAgBV,CAAvB;AACH;AACDU,uBAAO,CAAP;AACH;;AAEDU,mBAAOxD,IAAP,CAAYmC,CAAZ;AACAsB,mBAAOzD,IAAP,CAAYoC,CAAZ;AACAU,kBAAMwB,MAAMhF,MAAN,GAAe,CAArB;AACA,mBAAOwD,OAAO,CAAd,EAAiB;AACb,oBAAIyB,MAAMD,MAAMxB,GAAN,CAAV;AACA,oBAAI,EAAEjB,KAAK0C,GAAL,EAAUnC,CAAV,KAAgBmB,QAAQnB,EAAEmC,GAAF,CAAR,EAAgBpC,EAAEoC,GAAF,CAAhB,EAAwBf,MAAxB,EAAgCC,MAAhC,CAAlB,CAAJ,EAAgE;AAC5D,2BAAO,KAAP;AACH;AACDX,uBAAO,CAAP;AACH;AACDU,mBAAOgB,GAAP;AACAf,mBAAOe,GAAP;AACA,mBAAO,IAAP;AACH;;AAED;;;AAGA;;;;AAIA,YAAId,SAAS,SAATA,MAAS,CAACe,EAAD,EAAKC,EAAL,EAAY;AACrB,gBAAIzD,OAAOwD,EAAP,KAAcxD,OAAOyD,EAAP,CAAlB,EAA8B;AAC1B,uBAAOxE,GAAG,IAAH,CAAP;AACH;AACD,gBAAI,CAACe,OAAOwD,EAAP,CAAD,IAAe,CAACxD,OAAOyD,EAAP,CAApB,EAAgC;AAC5B,uBAAOvE,QAAQwE,GAAR,CAAY,CAACF,EAAD,EAAKC,EAAL,CAAZ,EACF3D,IADE,CACG,gBAAmB;AAAA;AAAA,wBAAjB6D,IAAiB;AAAA,wBAAXC,KAAW;;AACrB,2BAAOtB,QAAQqB,IAAR,EAAcC,KAAd,EAAqB,EAArB,EAAyB,EAAzB,CAAP,CADqB,CACc;AACtC,iBAHE,CAAP;AAIH;AACD,mBAAO3E,GAAG,KAAH,CAAP;AACH,SAXD;;AAaA;;;AAGA,YAAI4E,MAAM3F,MAAM,UAACC,EAAD,EAAK8B,CAAL,EAAW;AACvB9B,eAAG8B,CAAH;AACA,mBAAOA,CAAP;AACH,SAHS,CAAV;;AAKA,YAAM6D,QAAM,IAAI5E,OAAJ,CAAY;AAAA,mBAAK6E,CAAL;AAAA,SAAZ,CAAZ;AACA,YAAIC,QAAQ,SAARA,KAAQ;AAAA,mBAAMF,KAAN;AAAA,SAAZ;;AAEA;;;AAGA,YAAMG,QAAQ/F,MAAM,UAACC,EAAD,EAAKiB,CAAL,EAAW;AAC3B,mBAAOY,OAAOZ,CAAP,IAAYjB,GAAGiB,CAAH,CAAZ,GAAoBH,GAAGG,CAAH,EAAMU,IAAN,CAAW3B,EAAX,CAA3B;AACH,SAFa,CAAd;AAGA,YAAI+F,MAAMD,KAAV;AACA,YAAInE,OAAOmE,KAAX;AACA,YAAIE,OAAOF,KAAX;;AAEA;;;AAGA,YAAIG,SAASlG,MAAM,UAACC,EAAD,EAAKkG,OAAL;AAAA,mBAAiBhF,QAChC6E,IAAI;AAAA;AAAA,oBAAEI,QAAF;AAAA,oBAAY/D,KAAZ;;AAAA,uBAAuB+D,WAAW/D,KAAX,GAAmByD,OAA1C;AAAA,aAAJ,CADgC,EAE9BE,IAAI;AAAA,uBAAK,CAAC/F,GAAGiB,CAAH,CAAD,EAAQA,CAAR,CAAL;AAAA,aAAJ,CAF8B,EAGlCiF,OAHkC,CAAjB;AAAA,SAAN,CAAb;;AAKA;;;AAGA,YAAIE,eAAe,SAAfA,YAAe;AAAA,mBAAM,IAAIrF,OAAJ,CAAYf,EAAZ,CAAN;AAAA,SAAnB;;AAEA;;;AAGA,YAAIqG,MAAMtG,MAAM,UAACsF,EAAD,EAAKC,EAAL,EAAY;AACxB,gBAAIzD,OAAOwD,EAAP,CAAJ,EAAe,OAAOC,EAAP;AACf,gBAAIzD,OAAOyD,EAAP,CAAJ,EAAe,OAAOD,EAAP;AACf,mBAAOtE,QAAQuF,IAAR,CAAa,CAACjB,EAAD,EAAKC,EAAL,CAAb,CAAP;AACH,SAJS,CAAV;;AAMA;;;AAGA,YAAIiB,KAAKxG,MAAM,SAASwG,EAAT,CAAYC,WAAZ,EAAyBC,YAAzB,EAAuC;AAClD,mBAAO1F,QAAQwE,GAAR,CAAY,CAACiB,WAAD,EAAcC,YAAd,CAAZ,EACF9E,IADE,CACG,iBAAmB;AAAA;AAAA,oBAAjB+E,IAAiB;AAAA,oBAAXtE,KAAW;;AACrB,uBAAOsE,KAAKtE,KAAL,CAAP;AACH,aAHE,CAAP;AAIH,SALQ,CAAT;;AAOA;;;AAGC,iBAASuE,OAAT,CAAiBC,GAAjB,EAAsB;AACnB,mBAAOA,IAAInF,MAAJ,CAAW,UAAUoF,IAAV,EAAgBC,SAAhB,EAA2B;AACzC,uBAAOD,KAAKE,MAAL,CAAY1G,MAAM2G,OAAN,CAAcF,SAAd,IAA2BH,QAAQG,SAAR,CAA3B,GAAgDA,SAA5D,CAAP;AACH,aAFM,EAEJ,EAFI,CAAP;AAGH;;AAED;;;AAGA;;;;;AAKA,YAAIC,SAAShH,MAAM,UAACyF,IAAD,EAAOC,KAAP,EAAiB;AAChC,mBAAO1E,QAAQwE,GAAR,CAAY,CAACC,IAAD,EAAOC,KAAP,CAAZ,EAA2B9D,IAA3B,CAAgC,UAACsF,OAAD,EAAa;AAChD,oBAAIC,QAAQP,QAAQM,OAAR,CAAZ;AACA,uBAAOC,MAAMzF,MAAN,CAAa,UAAC0F,EAAD,EAAKlG,CAAL,EAAW;AAC3B,2BAAOkG,GAAGJ,MAAH,CAAU9F,CAAV,CAAP;AACH,iBAFM,EAEJ,EAFI,CAAP;AAGH,aALM,CAAP;AAMH,SAPY,CAAb;;AASA;;;;AAIA,YAAImG,cAAc;AACdlG,4BADc;AAEZoD,0BAFY;AAGZyC,0BAHY;AAIZjG,kBAJY;AAKZyF,kBALY;AAMZH,sCANY;AAOZzE,sBAPY;AAQZqE,sBARY;AASZD,oBATY;AAUZE,0BAVY;AAWZI,oBAXY;AAYZxE,0BAZY;AAaZ6D,oBAbY;AAcZ3D;AAdY,SAAlB;;0BAiBeqF,W","file":"help-promise.js","sourcesContent":["/**\r\n * Created by mgobbi on 14/03/2017.\r\n */\r\nfunction curry(fn) {\r\n    var arity = fn.length;\r\n\r\n    return (function resolver() {\r\n        var memory = Array.prototype.slice.call(arguments);\r\n        return function () {\r\n            var local = memory.slice(), next;\r\n            Array.prototype.push.apply(local, arguments);\r\n            next = local.length >= arity ? fn : resolver;\r\n            return next.apply(null, local);\r\n        };\r\n    }());\r\n}\n\n/**\r\n * Created by mgobbi on 17/03/2017.\r\n */\r\nvar of = curry(x=> Promise.resolve(x));\n\n/**\r\n * Created by mgobbi on 17/03/2017.\r\n */\r\n// Performs left-to-right composition of one or more Promise-returning functions.\r\nvar compose = function (...fns) {\r\n    var ctx = this;\r\n    fns.reverse();\r\n    var head = fns[0];\r\n    var tail = fns.slice(1);\r\n\r\n    return function (...args) {\r\n        return tail.reduce(function (acc, fn) {\r\n            return of(acc).then(function (x) {\r\n                return fn.call(ctx, x);\r\n            })\r\n        }, head.apply(ctx, args));\r\n    }\r\n};\n\n/**\r\n * Created by mgobbi on 17/03/2017.\r\n */\r\n\r\nconst _zero = Promise.resolve(false);\r\n\r\nvar isZero = p => {\r\n    return p === _zero;\r\n};\r\nvar zero = () => _zero;\n\n/**\r\n * Created by mgobbi on 12/04/2017.\r\n */\r\nfunction _arrayFromIterator(iter) {\r\n    var list = [];\r\n    var next;\r\n    while (!(next = iter.next()).done) {\r\n        list.push(next.value);\r\n    }\r\n    return list;\r\n}\n\n/**\r\n * Created by mgobbi on 12/04/2017.\r\n */\r\nfunction _functionName(f) {\r\n    // String(x => x) evaluates to \"x => x\", so the pattern may not match.\r\n    var match = String(f).match(/^function (\\w*)/);\r\n    return match == null ? '' : match[1];\r\n}\n\n/**\r\n * Created by mgobbi on 12/04/2017.\r\n */\r\nfunction _has(prop, obj) {\r\n    return Object.prototype.hasOwnProperty.call(obj, prop);\r\n}\n\n/**\r\n * Created by mgobbi on 12/04/2017.\r\n */\r\nfunction identical(a, b) {\r\n    // SameValue algorithm\r\n    if (a === b) { // Steps 1-5, 7-10\r\n        // Steps 6.b-6.e: +0 != -0\r\n        return a !== 0 || 1 / a === 1 / b;\r\n    } else {\r\n        // Step 6.a: NaN == NaN\r\n        return a !== a && b !== b;\r\n    }\r\n}\n\n/**\r\n * Created by mgobbi on 12/04/2017.\r\n */\r\nvar _isArguments = (function () {\r\n    var toString = Object.prototype.toString;\r\n    return toString.call(arguments) === '[object Arguments]' ?\r\n        function _isArguments(x) {\r\n            return toString.call(x) === '[object Arguments]';\r\n        } :\r\n        function _isArguments(x) {\r\n            return _has('callee', x);\r\n        };\r\n}());\n\n/**\r\n * Created by mgobbi on 12/04/2017.\r\n */\r\n\r\n/**\r\n * Returns a list containing the names of all the enumerable own properties of\r\n * the supplied object.\r\n * Note that the order of the output array is not guaranteed to be consistent\r\n * across different JS platforms.\r\n *\r\n * @func\r\n * @memberOf R\r\n * @since v0.1.0\r\n * @category Object\r\n * @sig {k: v} -> [k]\r\n * @param {Object} obj The object to extract properties from\r\n * @return {Array} An array of the object's own properties.\r\n * @example\r\n *\r\n *      R.keys({a: 1, b: 2, c: 3}); //=> ['a', 'b', 'c']\r\n */\r\nvar keys = (function () {\r\n    // cover IE < 9 keys issues\r\n    var hasEnumBug = !({toString: null}).propertyIsEnumerable('toString');\r\n    var nonEnumerableProps = ['constructor', 'valueOf', 'isPrototypeOf', 'toString',\r\n        'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\r\n    // Safari bug\r\n    var hasArgsEnumBug = (function () {\r\n        'use strict';\r\n        return arguments.propertyIsEnumerable('length');\r\n    }());\r\n\r\n    var contains = function contains(list, item) {\r\n        var idx = 0;\r\n        while (idx < list.length) {\r\n            if (list[idx] === item) {\r\n                return true;\r\n            }\r\n            idx += 1;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    function keys_ok(obj) {\r\n        return Object(obj) !== obj ? [] : Object.keys(obj);\r\n    }\r\n\r\n    function keys_enumsbug(obj) {\r\n        if (Object(obj) !== obj) {\r\n            return [];\r\n        }\r\n        var prop, nIdx;\r\n        var ks = [];\r\n        var checkArgsLength = hasArgsEnumBug && _isArguments(obj);\r\n        for (prop in obj) {\r\n            if (_has(prop, obj) && (!checkArgsLength || prop !== 'length')) {\r\n                ks[ks.length] = prop;\r\n            }\r\n        }\r\n        if (hasEnumBug) {\r\n            nIdx = nonEnumerableProps.length - 1;\r\n            while (nIdx >= 0) {\r\n                prop = nonEnumerableProps[nIdx];\r\n                if (_has(prop, obj) && !contains(ks, prop)) {\r\n                    ks[ks.length] = prop;\r\n                }\r\n                nIdx -= 1;\r\n            }\r\n        }\r\n        return ks;\r\n    }\r\n    return typeof Object.keys === 'function' && !hasArgsEnumBug ?\r\n        keys_ok : keys_enumsbug\r\n\r\n}());\n\n/**\r\n * Created by mgobbi on 10/04/2017.\r\n */\r\nvar type = (val) => {\r\n    return val === null ? 'Null' :\r\n        val === undefined ? 'Undefined' :\r\n            Object.prototype.toString.call(val).slice(8, -1);\r\n};\n\nfunction _equals(a, b, stackA, stackB) {\r\n    if (identical(a, b)) {\r\n        return true;\r\n    }\r\n\r\n    if (type(a) !== type(b)) {\r\n        return false;\r\n    }\r\n\r\n    if (a == null || b == null) {\r\n        return false;\r\n    }\r\n\r\n    if (typeof a.equals === 'function' || typeof b.equals === 'function') {\r\n        return typeof a.equals === 'function' && a.equals(b) &&\r\n            typeof b.equals === 'function' && b.equals(a);\r\n    }\r\n\r\n    switch (type(a)) {\r\n        case 'Arguments':\r\n        case 'Array':\r\n        case 'Object':\r\n            if (typeof a.constructor === 'function' &&\r\n                _functionName(a.constructor) === 'Promise') {\r\n                return a === b;\r\n            }\r\n            break;\r\n        case 'Boolean':\r\n        case 'Number':\r\n        case 'String':\r\n            if (!(typeof a === typeof b && identical(a.valueOf(), b.valueOf()))) {\r\n                return false;\r\n            }\r\n            break;\r\n        case 'Date':\r\n            if (!identical(a.valueOf(), b.valueOf())) {\r\n                return false;\r\n            }\r\n            break;\r\n        case 'Error':\r\n            return a.name === b.name && a.message === b.message;\r\n        case 'RegExp':\r\n            if (!(a.source === b.source &&\r\n                a.global === b.global &&\r\n                a.ignoreCase === b.ignoreCase &&\r\n                a.multiline === b.multiline &&\r\n                a.sticky === b.sticky &&\r\n                a.unicode === b.unicode)) {\r\n                return false;\r\n            }\r\n            break;\r\n        case 'Map':\r\n        case 'Set':\r\n            if (!_equals(_arrayFromIterator(a.entries()), _arrayFromIterator(b.entries()), stackA, stackB)) {\r\n                return false;\r\n            }\r\n            break;\r\n        case 'Int8Array':\r\n        case 'Uint8Array':\r\n        case 'Uint8ClampedArray':\r\n        case 'Int16Array':\r\n        case 'Uint16Array':\r\n        case 'Int32Array':\r\n        case 'Uint32Array':\r\n        case 'Float32Array':\r\n        case 'Float64Array':\r\n            break;\r\n        case 'ArrayBuffer':\r\n            break;\r\n        default:\r\n            // Values of other types are only equal if identical.\r\n            return false;\r\n    }\r\n\r\n    var keysA = keys(a);\r\n    if (keysA.length !== keys(b).length) {\r\n        return false;\r\n    }\r\n\r\n    var idx = stackA.length - 1;\r\n    while (idx >= 0) {\r\n        if (stackA[idx] === a) {\r\n            return stackB[idx] === b;\r\n        }\r\n        idx -= 1;\r\n    }\r\n\r\n    stackA.push(a);\r\n    stackB.push(b);\r\n    idx = keysA.length - 1;\r\n    while (idx >= 0) {\r\n        var key = keysA[idx];\r\n        if (!(_has(key, b) && _equals(b[key], a[key], stackA, stackB))) {\r\n            return false;\r\n        }\r\n        idx -= 1;\r\n    }\r\n    stackA.pop();\r\n    stackB.pop();\r\n    return true;\r\n}\n\n/**\r\n * Created by mgobbi on 17/03/2017.\r\n */\r\n/*\r\n ### Setoid\r\n\r\n */\r\nvar equals = (p1, p2) => {\r\n    if (isZero(p1) && isZero(p2)) {\r\n        return of(true);\r\n    }\r\n    if (!isZero(p1) && !isZero(p2)) {\r\n        return Promise.all([p1, p2])\r\n            .then(([left, right]) => {\r\n                return _equals(left, right, [], [])//left === right;\r\n            })\r\n    }\r\n    return of(false);\r\n};\n\n/**\r\n * Created by mgobbi on 19/04/2017.\r\n */\r\nvar tap = curry((fn, p) => {\r\n    fn(p);\r\n    return p;\r\n});\n\nconst NEVER=new Promise(_ => _);\r\nvar never = () => NEVER;\n\n/**\r\n * Created by mgobbi on 12/04/2017.\r\n */\r\nconst _then = curry((fn, x) => {\r\n    return isZero(x) ? fn(x) : of(x).then(fn);\r\n});\r\nvar map = _then;\r\nvar then = _then;\r\nvar bind = _then;\n\n/**\r\n * Created by mgobbi on 12/04/2017.\r\n */\r\nvar filter = curry((fn, promise) => compose(\r\n    map(([filtered, value]) => filtered ? value : never())\r\n    , map(x => [fn(x), x])\r\n)(promise));\n\n/**\r\n * Created by mgobbi on 12/04/2017.\r\n */\r\nvar fromCallback = fn => new Promise(fn);\n\n/**\r\n * Created by mgobbi on 12/04/2017.\r\n */\r\nvar alt = curry((p1, p2) => {\r\n    if (isZero(p1))return p2;\r\n    if (isZero(p2))return p1;\r\n    return Promise.race([p1, p2]);\r\n});\n\n/**\r\n * Created by mgobbi on 12/04/2017.\r\n */\r\nvar ap = curry(function ap(funcPromise, valuePromise) {\r\n    return Promise.all([funcPromise, valuePromise])\r\n        .then(([func, value]) => {\r\n            return func(value);\r\n        })\r\n});\n\n/**\r\n * Created by mgobbi on 12/04/2017.\r\n */\r\n function flatten(arr) {\r\n    return arr.reduce(function (flat, toFlatten) {\r\n        return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\r\n    }, []);\r\n}\n\n/**\r\n * Created by mgobbi on 17/03/2017.\r\n */\r\n/**\r\n ### Semigroup\r\n 1. `a.concat(b).concat(c)` is equivalent to `a.concat(b.concat(c))` (associativity)\r\n\r\n **/\r\nvar concat = curry((left, right) => {\r\n    return Promise.all([left, right]).then((results) => {\r\n        let _flat = flatten(results);\r\n        return _flat.reduce((xs, x) => {\r\n            return xs.concat(x);\r\n        }, []);\r\n    })\r\n});\n\n/**\r\n * Created by mgobbi on 10/03/2017.\r\n */\r\n\r\nvar helpPromise = {\r\n    compose\r\n    , equals\r\n    , concat\r\n    , of\r\n    , ap\r\n    , fromCallback\r\n    , then\r\n    , bind\r\n    , map\r\n    , filter\r\n    , alt\r\n    , isZero\r\n    , tap\r\n    , zero\r\n};\n\nexport default helpPromise;\n"]}